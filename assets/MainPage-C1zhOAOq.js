import{_ as p,B as b,I as w,a as x,b as k,r as y,H as L}from"./icon-close-DMosbnvm.js";import{r as v,o as d,c,a as s,b as t,d as u,e as m,w as R,f as h,g as f}from"./index-DocemA4U.js";const C=i=>i?/^[0-9A-Za-z.!_-]+@[A-Za-z]{3,}\.[A-Za-z]{2,}$/.test(i)?"":"Неправильный формат email":"Введите email",_=i=>i?"":"Введите пароль",B={components:{Button:b,Input:w},data(){return{emailValue:"",passwordValue:"",error:!1,err:{email:"",password:""},imageClose:x}},methods:{close(){this.$emit("close")},openRegister(){this.$emit("openRegister")},async login(){if(this.error=!1,this.err.email=C(this.emailValue),this.err.password=_(this.passwordValue),this.err.email||this.err.password||this.err.confirm)return;const i={email:this.emailValue,password:this.passwordValue};try{(await k(i)).accessToken?v.push({name:"tasklist"}):this.error=!0}catch(e){console.error(e)}}}},I={class:"modal"},U={class:"modal__content"},O={class:"modal__body"},A={class:"modal__body__flex"},S={class:"modal__body__text"},E={key:0,class:"error"};function H(i,e,g,V,o,r){const a=m("Button"),n=m("Input");return d(),c("div",I,[s("div",U,[t(a,{onClick:r.close,class:"modal__exit",imageSrc:o.imageClose,imageAlt:"закрыть",imageClass:"btn__small"},null,8,["onClick","imageSrc"]),e[4]||(e[4]=s("div",{class:"modal__header"},[s("h2",null," Вход в ваш аккаунт ")],-1)),s("div",O,[t(n,{text:"Email",type:"",modelValue:o.emailValue,"onUpdate:modelValue":e[0]||(e[0]=l=>o.emailValue=l),placeholder:"Введите значение",error:o.err.email},null,8,["modelValue","error"]),t(n,{text:"Пароль",type:"password",modelValue:o.passwordValue,"onUpdate:modelValue":e[1]||(e[1]=l=>o.passwordValue=l),placeholder:"Введите пароль",error:o.err.password},null,8,["modelValue","error"]),s("div",A,[s("div",S,[e[3]||(e[3]=s("div",{class:"text-smal"},"У вас нет аккаунта?",-1)),s("button",{onClick:e[2]||(e[2]=(...l)=>r.openRegister&&r.openRegister(...l)),class:"btn__empty"}," Зарегестрируйтесь ")]),t(a,{onClick:r.login,text:"Войти"},null,8,["onClick"])]),o.error?(d(),c("div",E," Пользователь с таким логином не найден ")):u("",!0)])])])}const N=p(B,[["render",H]]),z={components:{Button:b,Input:w},data(){return{loginValue:"",passwordValue:"",confirmValue:"",error:"",err:{email:"",password:"",confirm:""},imageClose:x}},methods:{close(){this.$emit("close")},openLogin(){this.$emit("openLogin")},async register(){if(this.err.email=C(this.loginValue),this.err.password=_(this.passwordValue),this.err.confirm=_(this.confirmValue),this.err.email||this.err.password||this.err.confirm)return;const i={email:this.loginValue,password:this.passwordValue,confirm_password:this.confirmValue};try{await y(i)&&this.openLogin()}catch(e){console.error(e)}}}},M={class:"modal"},P={class:"modal__content"},T={class:"modal__body"},Z={class:"modal__body__flex"},D={class:"modal__body__text"};function F(i,e,g,V,o,r){const a=m("Button"),n=m("Input");return d(),c("div",M,[s("div",P,[t(a,{onClick:r.close,imageSrc:o.imageClose,imageAlt:"закрыть",imageClass:"btn__small",class:"modal__exit"},null,8,["onClick","imageSrc"]),e[5]||(e[5]=s("div",{class:"modal__header"},[s("h2",null," Регистрация ")],-1)),s("div",T,[t(n,{text:"Email",type:"",modelValue:o.loginValue,"onUpdate:modelValue":e[0]||(e[0]=l=>o.loginValue=l),placeholder:"Введите значение",error:o.err.email},null,8,["modelValue","error"]),t(n,{text:"Пароль",type:"password",modelValue:o.passwordValue,"onUpdate:modelValue":e[1]||(e[1]=l=>o.passwordValue=l),placeholder:"Введите пароль",error:o.err.password},null,8,["modelValue","error"]),t(n,{text:"Пароль еще раз",type:"password",modelValue:o.confirmValue,"onUpdate:modelValue":e[2]||(e[2]=l=>o.confirmValue=l),placeholder:"Ввод",error:o.err.confirm},null,8,["modelValue","error"]),s("div",Z,[s("div",D,[e[4]||(e[4]=s("div",{class:"text-smal"},"У вас есть аккаунта?",-1)),s("button",{onClick:e[3]||(e[3]=R((...l)=>r.openLogin&&r.openLogin(...l),["stop"])),class:"btn__empty"},"Войдите")]),t(a,{onClick:r.register,text:"Зарегестрироваться"},null,8,["onClick"])])])])])}const J=p(z,[["render",F]]),W="/newDisc/assets/main-bg-DMFm0Pkb.png",j={components:{Header:L,Login:N,Register:J},data(){return{loginVisible:!1,registerVisible:!1}},methods:{changeLoginVisible(){this.loginVisible=!this.loginVisible},changeRegisterVisible(){this.registerVisible=!this.registerVisible},openRegister(){this.loginVisible=!1,this.registerVisible=!0},openLogin(){this.loginVisible=!0,this.registerVisible=!1}},mounted(){localStorage.getItem("JWT")&&v.push({name:"tasklist"})}},q={class:"section main"},G={class:"container"};function K(i,e,g,V,o,r){const a=m("Header"),n=m("Login"),l=m("Register");return d(),c("div",q,[s("div",G,[t(a,{onOpenLogin:r.changeLoginVisible},null,8,["onOpenLogin"]),e[0]||(e[0]=s("div",{class:"main__content"},[s("div",{class:"main__left"},[s("h1",null," Мои заметки "),s("h3",null,[h(" Не забывай о важном, "),s("br"),h(" храни его в облаке. ")])]),s("div",{class:"main__right"},[s("img",{src:W,alt:"фон"})])],-1))]),o.loginVisible?(d(),f(n,{key:0,onOpenRegister:r.openRegister,onClose:r.changeLoginVisible},null,8,["onOpenRegister","onClose"])):u("",!0),o.registerVisible?(d(),f(l,{key:1,onOpenLogin:r.openLogin,onClose:r.changeRegisterVisible},null,8,["onOpenLogin","onClose"])):u("",!0)])}const Y=p(j,[["render",K]]);export{Y as default};
